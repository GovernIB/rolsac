<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="es">
<head>
<title>API ROLSAC per integradors no java</title>
<meta name="date" content="2014-05-26">
<link rel="stylesheet" type="text/css" href="stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="API ROLSAC per integradors no java";
    }
//-->
</script>
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="overview-summary.html">Overview</a></li>
<li>Package</li>
<li>Class</li>
<li>Use</li>
<li><a href="overview-tree.html">Tree</a></li>
<li><a href="deprecated-list.html">Deprecated</a></li>
<li><a href="index-all.html">Index</a></li>
<li><a href="help-doc.html">Help</a></li>
</ul>
</div>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 class="title"><h1>API ROLSAC per integradors no java</h1></h1>
</div>
<div class="contentContainer">

<blink>contingut en construcció</blink>


<!-- HTML generated using hilite.me -->
<div style="background: #ffffff; overflow:auto;width:80%;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;">

<pre style="margin: 0; line-height: 125%"><span style="color: #557799">&lt;?php</span>

<span style="color: #888888">//Url base dels serveis web</span>
<span style="color: #996633">$serverURL</span> <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&#39;http://caibrolsac.in.at4.net:8080/sacws-api/services/&#39;</span>;

<span style="color: #888888">//Servei web general</span>
<span style="color: #996633">$clientRolsac</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> SoapClient(<span style="color: #996633">$serverURL</span> <span style="color: #333333">.</span> <span style="background-color: #fff0f0">&#39;RolsacWS?wsdl&#39;</span>, <span style="color: #008800; font-weight: bold">array</span>(<span style="background-color: #fff0f0">&quot;trace&quot;</span> <span style="color: #333333">=&gt;</span> <span style="color: #0000DD; font-weight: bold">1</span>, <span style="background-color: #fff0f0">&quot;exception&quot;</span> <span style="color: #333333">=&gt;</span> <span style="color: #0000DD; font-weight: bold">0</span>));

<span style="color: #888888">//Servei web de procediments</span>
<span style="color: #996633">$clientProcediment</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> SoapClient(<span style="color: #996633">$serverURL</span> <span style="color: #333333">.</span> <span style="background-color: #fff0f0">&#39;ProcedimentWS?wsdl&#39;</span>, <span style="color: #008800; font-weight: bold">array</span>(<span style="background-color: #fff0f0">&quot;trace&quot;</span> <span style="color: #333333">=&gt;</span> <span style="color: #0000DD; font-weight: bold">1</span>, <span style="background-color: #fff0f0">&quot;exception&quot;</span> <span style="color: #333333">=&gt;</span> <span style="color: #0000DD; font-weight: bold">0</span>));

<span style="color: #996633">$idUA</span> <span style="color: #333333">=</span> <span style="color: #0000DD; font-weight: bold">3</span>;

<span style="color: #888888">//Desde PHP, es poden enviar els objectes com vectors associatius</span>
<span style="color: #008800; font-weight: bold">echo</span> <span style="background-color: #fff0f0">&quot;Num de procediments per la UA </span><span style="background-color: #eeeeee">$idUA</span><span style="background-color: #fff0f0">:&quot;</span>;
<span style="color: #008800; font-weight: bold">echo</span> <span style="color: #996633">$clientRolsac</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">getNumProcediments</span>( 
    <span style="color: #008800; font-weight: bold">array</span>(
        <span style="background-color: #fff0f0">&quot;idioma&quot;</span><span style="color: #333333">=&gt;</span><span style="background-color: #fff0f0">&quot;es&quot;</span>,
        <span style="background-color: #fff0f0">&quot;unidadAdministrativa&quot;</span><span style="color: #333333">=&gt;</span><span style="color: #996633">$idUA</span>
        ) 
    );
<span style="color: #008800; font-weight: bold">echo</span> <span style="background-color: #fff0f0">&#39;&lt;br/&gt;&#39;</span>;
 
<span style="color: #888888">//O emprar la forma elegant, replicant els objectes.</span>
<span style="color: #888888">//(Certs frameworks poden crear el conjunt de les classes a partir dels arxius WSDL)</span>
<span style="color: #008800; font-weight: bold">require</span> <span style="background-color: #fff0f0">&quot;./ProcedimentCriteria.class.php&quot;</span>; 
<span style="color: #996633">$criteria</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> ProcedimentCriteria();
<span style="color: #996633">$criteria</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">idioma</span> <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;es&quot;</span>;
<span style="color: #996633">$criteria</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">unidadAdministrativa</span> <span style="color: #333333">=</span> <span style="color: #996633">$idUA</span>;

<span style="color: #008800; font-weight: bold">echo</span> <span style="background-color: #fff0f0">&quot;Num de procediments per la UA </span><span style="background-color: #eeeeee">$idUA</span><span style="background-color: #fff0f0">:&quot;</span>;
<span style="color: #008800; font-weight: bold">echo</span> <span style="color: #996633">$clientRolsac</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">getNumProcediments</span>( <span style="color: #996633">$criteria</span> );
<span style="color: #008800; font-weight: bold">echo</span> <span style="background-color: #fff0f0">&#39;&lt;br/&gt;&#39;</span>;

<span style="color: #888888">//Per lo general els llistats necessiten que indiquem el tamany de paginaciÃ³</span>
<span style="color: #996633">$criteria</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">tamany</span> <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;20&quot;</span>;

<span style="color: #008800; font-weight: bold">echo</span> <span style="background-color: #fff0f0">&quot;&lt;pre&gt;&quot;</span>;
<span style="color: #996633">$procediments</span> <span style="color: #333333">=</span> <span style="color: #996633">$clientRolsac</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">llistarProcediments</span>( <span style="color: #996633">$criteria</span> );
<span style="color: #996633">$procedimentDTO</span> <span style="color: #333333">=</span><span style="color: #996633">$procediments</span>[<span style="color: #0000DD; font-weight: bold">0</span>]; 
<span style="color: #007020">var_dump</span>( <span style="color: #996633">$procedimentDTO</span> );
<span style="color: #008800; font-weight: bold">echo</span> <span style="background-color: #fff0f0">&quot;&lt;/pre&gt;&quot;</span>;

<span style="color: #008800; font-weight: bold">echo</span> <span style="background-color: #fff0f0">&#39;&lt;br&gt;&#39;</span>;

<span style="color: #888888">//Per llistar les relacions, ja hem d&#39;emprar el webservice corresponent a cada tipus d&#39;entitat</span>
<span style="color: #888888">//Llistar les normatives d&#39;un procediment</span>
<span style="color: #007020">var_dump</span>(<span style="color: #996633">$clientProcediment</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">llistarNormatives</span>(<span style="color: #996633">$procedimentDTO</span><span style="color: #333333">-&gt;</span><span style="color: #0000CC">id</span>, <span style="color: #008800; font-weight: bold">array</span>( <span style="background-color: #fff0f0">&quot;idioma&quot;</span><span style="color: #333333">=&gt;</span><span style="background-color: #fff0f0">&quot;es&quot;</span>) ));


<span style="color: #557799">?&gt;</span>
</pre></div>

</div>
</body>
</html>

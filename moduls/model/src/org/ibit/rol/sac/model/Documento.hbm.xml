<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd">

<!-- OBSOLETA  -->

<hibernate-mapping>
    <class name="org.ibit.rol.sac.model.Documento" table="RSC_DOCUME" discriminator-value="documento">
        <cache usage="read-write"/>
        <id name="id" unsaved-value="null" column="DOC_CODI">
            <generator class="sequence">
                <param name="sequence">RSC_SEQ_ALL</param>
            </generator>
        </id>

        <discriminator column="DOC_TYPE" type="string" length="64" />

        <many-to-one name="ficha" column="DOC_CODFIC" foreign-key="RSC_DOCFIC_FK"/>
        <many-to-one name="procedimiento" column="DOC_CODPRO" foreign-key="RSC_DOCPRO_FK"/>
        <many-to-one name="archivo" cascade="all" column="DOC_CODARC2" foreign-key="RSC_DOCARC2_FK"/>
<!-- 
        <many-to-one name="docInformatiuTramite" column="DOC_INF_CODTRA" foreign-key="RSC_INF_DOCTRA_FK"/>
        <many-to-one name="docPresentarTramite"  column="DOC_PRE_CODTRA" foreign-key="RSC_PRE_DOCTRA_FK"/>
        <many-to-one name="requisitTramite"  column="DOC_REQ_CODTRA" foreign-key="RSC_REQ_DOCTRA_FK"/>
        <many-to-one name="formulariTramite"  column="DOC_FOR_CODTRA" foreign-key="RSC_FOR_DOCTRA_FK"/>
-->
        <property name="orden" column="DOC_ORDEN" />

        <map name="traducciones" cascade="all" table="RSC_TRADOC">
            <cache usage="read-write"/>
            <key column="TDO_CODDOC" foreign-key="RSC_TDODOC_FK"/>
            <index column="TDO_CODIDI" type="string" length="2"/>
            <composite-element class="org.ibit.rol.sac.model.TraduccionDocumento">
                <property name="titulo" length="256" column="TDO_TITULO"/>
                <property name="descripcion" length="4000" column="TDO_DESCRI"/>
                <many-to-one cascade="all" name="archivo" column="TDO_CODARC" foreign-key="RSC_TDOARC_FK"/>                
            </composite-element>
        </map>

        <subclass name="org.ibit.rol.sac.model.DocumentoRemoto" discriminator-value="documentoRemoto">
            <property name="idExterno" column="DOR_IDEXTE"/>
            <property name="urlRemota" length="512" column="DOR_URLREM"/>
            <many-to-one name="administracionRemota" column="DOR_CODADM" foreign-key="RSC_DORADM_FK" />
        </subclass>

    </class>
</hibernate-mapping>
<?xml version="1.0" encoding="UTF-8"?>
<!-- Archivo para generar los scripts de la BD a partir de los archivos de hibernate -->
<project name="01rolsac.db" default="initdb" basedir=".">
		
    <property name="lib" location="${basedir}/lib"/>
    <property name="output.dir" location="${basedir}/output"/>
    <property name="model.hbm" location="${output.dir}/model/gen-etc"/>
    <property name="moduls.dir" location="${output.dir}/moduls"/>

    <path id="db.classpath">
        <fileset dir="${lib}">
    		<include name="hibernate2.jar"/>
        	<include name="dom4j.jar"/>
        	<include name="odmg.jar"/>
        	<include name="cglib2.jar"/>
        	<include name="commons-logging.jar"/>        	
        	<include name="commons-collections.jar"/>
        	<include name="lucene-caib.jar"/>
        	<include name="ojdbc14.jar"/>
        </fileset>
        <fileset dir="${moduls.dir}" includes="model.jar"/>
    </path>

    <target name="initdb">

        <taskdef
            name="schemaexport"
            classname="net.sf.hibernate.tool.hbm2ddl.SchemaExportTask"
            classpathref="db.classpath"/>

        <schemaexport
        	properties="${basedir}/default.properties"
            quiet="no"
            text="yes"
            delimiter=";"
            output="${output.dir}/schema.sql">
        	
            <fileset dir="${model.hbm}" includes="**/*.hbm.xml" />        	
            
        </schemaexport>
    </target>
	
	
	<target name="schemaupdate">

			<taskdef name="schemaupdate"
				classname="net.sf.hibernate.tool.hbm2ddl.SchemaUpdateTask"
				classpathref="db.classpath"/>
			<schemaupdate
				properties="${basedir}/default.properties"
				text="yes"
				quiet="no">

				<fileset dir="${model.hbm}" includes="**/*.hbm.xml" />
				
			</schemaupdate>
		</target>
	
</project>
